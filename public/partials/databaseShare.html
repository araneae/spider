<div ng-controller="DatabaseShareCtrl as ctrl">
  <div class="col-md-10">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="panel-title">Sharing "{{ctrl.document.name}}"</div>
      </div>
      <div class="panel-body">
        <form id="idDocumentShareForm" name="DocumentShareForm" class="form-horizontal" role="form"
            ng-submit="ctrl.sendShare()">
          <div class="form-group">
            <div ui-select2="ctrl.select2Options" class="form-control" name="receiver" id="idReceiver" placeholder="Select receivers"
                     ng-model="ctrl.share.receivers" required-multiple="true"></div>
          </div>
          <div class="form-group">
            <input type="text" class="form-control" rows="5" name="subject" id="idSubject" placeholder="Message subject"
                     ng-model="ctrl.share.subject" ng-required="true"></input>
          </div>
          <div class="form-group">
            <textarea class="form-control" rows="5" name="note" id="idNote" placeholder="Add a share message"
                     ng-model="ctrl.share.message" ng-required="true"></textarea>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" ng-model="ctrl.share.canCopy"> Allow Copy</input>
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" ng-model="ctrl.share.canView"> Allow View</input>
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" ng-model="ctrl.share.canShare" ng-disabled="ctrl.share.isLimitedShare"> Allow Share</input>
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" ng-model="ctrl.share.isLimitedShare"> Limited Share Until (EOD)</input>
            </label>
            <div class="input-group col-md-3" ng-show="ctrl.share.isLimitedShare">
                <input type="text" class="form-control" datepicker-popup="{{ctrl.dateOptions.format}}" 
                      ng-model="ctrl.share.shareUntilEOD" is-open="ctrl.isDatePickerOpened" min-date="{{ctrl.dateOptions.minDate}}" 
                        datepicker-options="ctrl.dateOptions" close-text="Close" placeholder="{{ctrl.dateOptions.format}}"/>
                <span class="input-group-btn">
                  <button type="button" class="btn btn-default" ng-click="ctrl.openDatePicker($event)">
                    <i class="glyphicon glyphicon-calendar"></i>
                  </button>
                </span>
            </div>
          </div>
          <hr/>
          <!-- <pre>{{ ctrl.share | json }}</pre> -->
          <div class="form-group">
              <div class="col-md-8">
                  <button type='button' class="btn btn-warning" id="btnCancel" ng-click="ctrl.cancel()">Cancel</button>
                  <button type="submit" class="btn btn-success" id="btnSend" ng-disabled="ctrl.disableShare()">Share</button>
                  <button type='button' class="btn btn-success" id="btnManageShares" ng-click="ctrl.goToManageShares()">Manage Shares</button>
              </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>